<form name="newCampaignForm" ng-submit="createCampaign(campaign)">
    <div id="campaign-new-container">
        <h1 translate>Create a campaign</h1>

        <label translate>Campaign label</label>
        <input type="text" ng-model="campaign.label" required="required" ng-trim auto-focus />

        <tabset>
            <tab
                ng-repeat="environment in campaign.environments | filter:{is_choosen:true}"
                heading="{{ environment.label }}"
            >
                <table class="table table-striped table-bordered test-definition-list">
                    <thead>
                        <tr>
                            <th></th>
                            <th>#</th>
                            <th translate>Test name</th>
                            <th translate>Category</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="definition in definitions | CurrentPageFilter:environment.current_page:ITEMS_PER_PAGE track by $index ">
                            <td><input type="checkbox" ng-model="environment.definitions[definition.id]" /></td>
                            <td>{{ definition.id }}</td>
                            <td>{{ definition.summary }}</td>
                            <td>{{ definition.category }}</td>
                        </tr>
                    </tbody>
                </table>

                <img src="scripts/angular/bin/assets/loader.gif"
                     ng-if="loading_definitions && environment.current_page * ITEMS_PER_PAGE > definitions.length"
                     class="loader" />

                <div class="definitions-pagination-container">
                    <pagination
                        total-items="nb_total_definitions"
                        items-per-page="{{ ITEMS_PER_PAGE }}"
                        max-size="5"
                        page="environment.current_page"
                        class="pagination-sm"
                        boundary-links="true"
                        previous-text="&lsaquo;"
                        next-text="&rsaquo;"
                        first-text="&laquo;"
                        last-text="&raquo;"
                    ></pagination>
                </div>
            </tab>
            <tab>
                <tab-heading>
                    <i class="icon icon-plus"></i>
                </tab-heading>
                <p translate>Tests are run in an environment.</p>
                <p ng-if="! campaign.label" translate>Please choose the environments for the new campaign:</p>
                <p ng-if="campaign.label" translate>Please choose the environments for "{{ campaign.label }}" campaign:</p>

                <label ng-repeat="environment in campaign.environments" class="checkbox">
                    <input type="checkbox" ng-model="environment.is_choosen" />
                    {{ environment.label }}
                </label>

                <img src="scripts/angular/bin/assets/loader.gif"
                     ng-if="loading_environments"
                     class="loader" />

                <div class="alert alert-error error-no-environment-defined"
                     ng-if="! campaign.environments.length && ! loading_environments">
                    <img src="scripts/angular/bin/assets/sad-cat.jpg" alt="sad cat is sad" />
                    <p>
                        <strong translate>Oh no!</strong>
                        <span translate>You have not any environment defined.</span>
                    </p>
                    <p>
                        <span translate>Please configure the test execution tracker and
                        add environments in order to be able to go further.</span>
                    </p>
                </div>
            </tab>
        </tabset>
    </div>

    <div id="campaign-new-button-bar">
        <button
            type="submit"
            class="btn btn-large btn-primary"
            ng-disabled="! newCampaignForm.$valid"
            translate>Create campaign</button>
    </div>
</form>