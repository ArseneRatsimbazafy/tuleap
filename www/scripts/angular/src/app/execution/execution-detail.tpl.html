<div class="alert alert-error " ng-if="error_message">{{ error_message }}</div>

<div id="current-execution" class="in">
    <h2 class="{{ execution.status | dasherize }}">{{ execution.definition.summary }}</h2>

    <div class="row-fluid">
        <div id="current-execution-last-execution" class="span6" ng-if="(execution.status | dasherize) !== 'notrun'">
            <p class="current-execution-title" translate>Last execution in this campaign</p>
            <p class="last-execution-details" ng-if="execution.previous_result.submitted_on">
                <span translate>Date:</span> {{ execution.previous_result.submitted_on | amCalendar }}
            </p>
            <p class="last-execution-details" ng-if="execution.previous_result.submitted_by.real_name">
                <span translate>By:</span> {{ execution.previous_result.submitted_by.real_name }}
            </p>
            <p class="last-execution-details" id="last-execution-comment" ng-if="execution.previous_result.result">
                <span translate>Comment:</span> {{ execution.previous_result.result }}
                <span class="read-more" ng-if="execution.previous_result.result.length > 150"></span>
            </p>
        </div>
        <div id="current-execution-assigned-to" class="span6" ng-if="execution.assigned_to">
            <p class="current-execution-title" translate>Assigned to</p>
            <div><img ng-src="{{ sanitizeHtml(execution.assigned_to.avatar_url) }}" alt="avatar">{{ execution.assigned_to.real_name }}</div>
        </div>
    </div>

    <div class="row-fluid">
        <div id="current-execution-description">
            <p class="current-execution-title" translate>Test definition</p>
            <div ng-bind-html="sanitizeHtml(execution.definition.description)"></div>
        </div>
    </div>

    <div id="current-execution-result">
        <form>
            <textarea placeholder="{{ 'Comment...' | translate }}" ng-model="execution.results"></textarea>
            <div id="result-choices">
                <button class="btn btn-large btn-success" title="{{ 'Passed' | translate }}" ng-click="pass(execution)">
                   <img src="scripts/angular/bin/assets/status-passed-white-big.png" alt="{{ 'Passed' | translate }}">
                </button>
                <button class="btn btn-large btn-danger" title="{{ 'Failed' | translate }}" ng-click="fail(execution)">
                   <img src="scripts/angular/bin/assets/status-failed-white-big.png" alt="{{ 'Failed' | translate }}">
                </button>
                <button class="btn btn-large btn-info" title="{{ 'Blocked' | translate }}" ng-click="block(execution)">
                   <img src="scripts/angular/bin/assets/status-blocked-white-big.png" alt="{{ 'Blocked' | translate }}">
                </button>
            </div>
        </form>
    </div>
</div>
