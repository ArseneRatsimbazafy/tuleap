<div class="alert alert-error " ng-if="execution.error">{{ execution.error }}</div>

<div class="tuleap-modal-loading" ng-if="artifact_links_graph_modal_loading.is_loading"></div>

<div id="current-execution" class="in" ng-if="execution">
    <div id="current-execution-title">
        <h2 class="{{ execution.status | dasherize }}">
            <img id="show-artifact-links-graph-modal"
                src="scripts/angular/bin/assets/artifact-link-graph.svg"
                type="image/svg+xml"
                alt="Graph"
                ng-click="showArtifactLinksGraphModal(execution.id)"
                title="{{ 'Show dependencies graph for this test' | translate }}"

            />
            {{ execution.definition.summary }}
        </h2>
    </div>

    <div id="current-execution-last-execution" class="{{ execution.status | dasherize }}" ng-if="(execution.status | dasherize) !== 'notrun'">
            <img ng-src="scripts/angular/bin/assets/status-{{ execution.status | dasherize }}-white-big.png" />
            <span ng-if="execution.previous_result.submitted_on">
                {{ execution.previous_result.submitted_on | amCalendar }}
            </span>
            <span ng-if="execution.previous_result.submitted_by.real_name">
                <span translate>by</span> {{ execution.previous_result.submitted_by.real_name }}
            </span>
            <img ng-src="scripts/angular/bin/assets/status-{{ execution.status | dasherize }}-white-big.png" />

            <p id="last-execution-comment" ng-if="execution.previous_result.result">
                {{ execution.previous_result.result }}
                <span class="read-more" ng-if="execution.previous_result.result.length > 150"></span>
            </p>
    </div>

    <div adapt-height id="current-execution-description">
        <div ng-bind-html="sanitizeHtml(execution.definition.description)"></div>
    </div>

    <div id="current-execution-result">
        <form>
            <textarea placeholder="{{ 'Comment...' | translate }}" ng-model="execution.results"></textarea>
            <div id="result-choices">
                <button class="btn btn-large btn-success" title="{{ 'Passed' | translate }}" ng-click="pass(execution)" ng-disabled="execution.saving">
                    <img src="scripts/angular/bin/assets/status-passed-white-big.png" alt="{{ 'Passed' | translate }}">
                </button>
                <button class="btn btn-large btn-danger" title="{{ 'Failed' | translate }}" ng-click="fail(execution)" ng-disabled="execution.saving">
                    <img src="scripts/angular/bin/assets/status-failed-white-big.png" alt="{{ 'Failed' | translate }}">
                </button>
                <button class="btn btn-large btn-info" title="{{ 'Blocked' | translate }}" ng-click="block(execution)" ng-disabled="execution.saving">
                    <img src="scripts/angular/bin/assets/status-blocked-white-big.png" alt="{{ 'Blocked' | translate }}">
                </button>
            </div>
        </form>
    </div>
</div>
